# DTO & JSON & CORS

## 학습키워드

* DTO( Data Transfer Object)란
  * 프로세스 간 통신( IPC, Inter-Process Communication)
* "무기력한 도메인 모델"이란 그리고 안티 패턴인 이유
* 자바빈즈(Java Beans)
* EJB(Enterprise JavaBeans)
* Java의 record
* DAO
* ORM


### 개요

F/E와 B/E가 서로 요청과 응답을 하기 위해선 JSON이란 포맷을 사용하고, String에 불과한 JSON을 자바에서 다루기 위해 DTO를 사용하려 한다.

## DTO

- 제약조건
   - 프로세스 간에 통신
   - remote 통신

### IPC ( Inter-Process Communication)
: 프로세스 간의 통신을 IPC라고 부름
- 서로 다른 프로세스는 거칠게 이야기 하면 다른 프로그램.
- B/E , F/E 로 Tier를 나누면 필수적임.
- IPC에서 쓸 수 있는 기술
  - File -> 가장 기본적인 접근. 원격 환경에서 활용하기 어려움
  - Socket -> 파일과 유사하게 읽고 쓸 수 있지만, 원격 환경에서도 사용 가능
    - HTTP 같은 고수준 프로토콜을 활용하면 어느 정도 정해진 틀이 있기 때문에 상대적으로 쉬워짐
    - REST를 활용하면 RPC(SOAP의 일반적인 활용)가 아닌 RESOURCE에 대한 CRUD로 정리해야함 : Action자체를 제한적으로 둔다.       


REST에선 표현을 다뤄야 하고, 이를 위해서 데이터를 담는 것 이외엔 사실상 아무 것도 하지 않아서 제대로 된 객체라고 볼수없는(하지만 자바에선 어쩔수없이 클래스를 활용해서 쓸수밖에 없는) 특별한 객체를 사용하게 된다.       

"무기력한 도메인 모델" 안티패턴      
: 무기력한 도메인     

### DTO


필드에서 private로 선언한 멤버들은 외부에서 접근할 수 없다.     
- 아주 단순하게 보면 getter와 setter로 이루어짐
- JavaBeans에서 유래한 Java Bean 또는 그냥 Bean이라고 부르는 형태에 가까움
  -  JavaBeans의 관례
     -  클래스는 **직렬화**되어야한다.      
     -  클래스는 기본생성자를 가지고있어야한다.(파라미터가 없는 생성자)      
     -  클래스의 속성들은 get,set 혹은 표준 명명법을 따르는 메서드들을 사용해 접근할 수 있어야 한다.      
     -  클래스는 필요한 이벤트 처리 메서드들을 포함하고 있어야 한다.      
     -  제대로 된 객체가 아니라 그냥 무기력한 데이터 덩어리들.      


### Tier간 통신
- F/E와 B/E 사이
  - DTO 자체를 그대로 전송할 순 없고, 직렬화(마샬링)을 통해야 한다.      
  - 어떤 직렬화 기술을 사용할건지도 결정해야함. 우리는 JSON을 사용        
  > **Three Tier?**      
  > 사용자 표현 계층 / 비즈니스계층 / 데이터 계층      

- B/E와 DB 사이
  - 아주 예전에는 VO를 DTO라는 의미로 사용했지만(나도 이렇게 이해하고있었음), Transfer Object로 정정함.    
